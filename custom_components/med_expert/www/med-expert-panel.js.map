{"version":3,"file":"med-expert-panel.js","mappings":"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","sources":["webpack://med-expert-frontend/./node_modules/@lit/reactive-element/css-tag.js","webpack://med-expert-frontend/./node_modules/@lit/reactive-element/reactive-element.js","webpack://med-expert-frontend/./node_modules/lit-html/lit-html.js","webpack://med-expert-frontend/./node_modules/lit-element/lit-element.js","webpack://med-expert-frontend/./node_modules/@lit/reactive-element/decorators/custom-element.js","webpack://med-expert-frontend/./node_modules/@lit/reactive-element/decorators/property.js","webpack://med-expert-frontend/./node_modules/@lit/reactive-element/decorators/state.js","webpack://med-expert-frontend/./src/types.ts","webpack://med-expert-frontend/./src/add-medication-wizard.ts","webpack://med-expert-frontend/./src/panel.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1],t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,css,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:h,getOwnPropertyNames:r,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),b={attribute:!0,type:String,converter:u,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),h=this.getPropertyDescriptor(t,i,s);void 0!==h&&e(this.prototype,t,h)}}static getPropertyDescriptor(t,s,i){const{get:e,set:r}=h(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:e,set(s){const h=e?.call(this);r?.call(this,s),this.requestUpdate(t,h,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...r(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$ET(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const h=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==h?this.removeAttribute(e):this.setAttribute(e,h),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e;const r=h.fromAttribute(s,t.type);this[e]=r??this._$Ej?.get(e)??r,this._$Em=null}}requestUpdate(t,s,i,e=!1,h){if(void 0!==t){const r=this.constructor;if(!1===e&&(h=this[t]),i??=r.getPropertyOptions(t),!((i.hasChanged??f)(h,s)||i.useDefault&&i.reflect&&h===this._$Ej?.get(t)&&!this.hasAttribute(r._$Eu(t,i))))return;this.C(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:i,reflect:e,wrapped:h},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??s??this[t]),!0!==h||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(s=void 0),this._$AL.set(t,s)),!0===e&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t){const{wrapped:t}=i,e=this[s];!0!==t||this._$AL.has(s)||void 0===e||this.C(s,void 0,i,e)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:\"open\"},y[d(\"elementProperties\")]=new Map,y[d(\"finalized\")]=new Map,p?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push(\"2.1.2\");export{y as ReactiveElement,s as adoptStyles,u as defaultConverter,t as getCompatibleStyle,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t=>t,s=t.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,h=\"$lit$\",o=`lit$${Math.random().toFixed(9).slice(2)}$`,n=\"?\"+o,r=`<${n}>`,l=document,c=()=>l.createComment(\"\"),a=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,u=Array.isArray,d=t=>u(t)||\"function\"==typeof t?.[Symbol.iterator],f=\"[ \\t\\n\\f\\r]\",v=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${f}(?:([^\\\\s\"'>=/]+)(${f}*=${f}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),g=/'/g,$=/\"/g,y=/^(?:script|style|textarea|title)$/i,x=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),b=x(1),w=x(2),T=x(3),E=Symbol.for(\"lit-noChange\"),A=Symbol.for(\"lit-nothing\"),C=new WeakMap,P=l.createTreeWalker(l,129);function V(t,i){if(!u(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==e?e.createHTML(i):i}const N=(t,i)=>{const s=t.length-1,e=[];let n,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=v;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,f=0;for(;f<s.length&&(c.lastIndex=f,u=c.exec(s),null!==u);)f=c.lastIndex,c===v?\"!--\"===u[1]?c=_:void 0!==u[1]?c=m:void 0!==u[2]?(y.test(u[2])&&(n=RegExp(\"</\"+u[2],\"g\")),c=p):void 0!==u[3]&&(c=p):c===p?\">\"===u[0]?(c=n??v,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?p:'\"'===u[3]?$:g):c===$||c===g?c=p:c===_||c===m?c=v:(c=p,n=void 0);const x=c===p&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===v?s+r:d>=0?(e.push(a),s.slice(0,d)+h+s.slice(d)+o+x):s+o+(-2===d?i:x)}return[V(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),e]};class S{constructor({strings:t,_$litType$:i},e){let r;this.parts=[];let l=0,a=0;const u=t.length-1,d=this.parts,[f,v]=N(t,i);if(this.el=S.createElement(f,e),P.currentNode=this.el.content,2===i||3===i){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=P.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(h)){const i=v[a++],s=r.getAttribute(t).split(o),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:l,name:e[2],strings:s,ctor:\".\"===e[1]?I:\"?\"===e[1]?L:\"@\"===e[1]?z:H}),r.removeAttribute(t)}else t.startsWith(o)&&(d.push({type:6,index:l}),r.removeAttribute(t));if(y.test(r.tagName)){const t=r.textContent.split(o),i=t.length-1;if(i>0){r.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)r.append(t[s],c()),P.nextNode(),d.push({type:2,index:++l});r.append(t[i],c())}}}else if(8===r.nodeType)if(r.data===n)d.push({type:2,index:l});else{let t=-1;for(;-1!==(t=r.data.indexOf(o,t+1));)d.push({type:7,index:l}),t+=o.length-1}l++}}static createElement(t,i){const s=l.createElement(\"template\");return s.innerHTML=t,s}}function M(t,i,s=t,e){if(i===E)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=a(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=M(t,h._$AS(t,i.values),h,e)),i}class R{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??l).importNode(i,!0);P.currentNode=e;let h=P.nextNode(),o=0,n=0,r=s[0];for(;void 0!==r;){if(o===r.index){let i;2===r.type?i=new k(h,h.nextSibling,this,t):1===r.type?i=new r.ctor(h,r.name,r.strings,this,t):6===r.type&&(i=new Z(h,this,t)),this._$AV.push(i),r=s[++n]}o!==r?.index&&(h=P.nextNode(),o++)}return P.currentNode=l,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class k{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=M(this,t,i),a(t)?t===A||null==t||\"\"===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==E&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):d(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==A&&a(this._$AH)?this._$AA.nextSibling.data=t:this.T(l.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=S.createElement(V(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new R(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=C.get(t.strings);return void 0===i&&C.set(t.strings,i=new S(t)),i}k(t){u(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new k(this.O(c()),this.O(c()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,s){for(this._$AP?.(!1,!0,s);t!==this._$AB;){const s=i(t).nextSibling;i(t).remove(),t=s}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class H{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=A}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=M(this,t,i,0),o=!a(t)||t!==this._$AH&&t!==E,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=M(this,e[s+n],i,n),r===E&&(r=this._$AH[n]),o||=!a(r)||r!==this._$AH[n],r===A?t=A:t!==A&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class I extends H{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}class L extends H{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==A)}}class z extends H{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=M(this,t,i,0)??A)===E)return;const s=this._$AH,e=t===A&&s!==A||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==A&&(s===A||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class Z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){M(this,t)}}const j={M:h,P:o,A:n,C:1,L:N,R,D:d,V:M,I:k,H,N:L,U:z,B:I,F:Z},B=t.litHtmlPolyfillSupport;B?.(S,k),(t.litHtmlVersions??=[]).push(\"3.3.2\");const D=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new k(i.insertBefore(c(),t),t,void 0,s??{})}return h._$AI(t),h};export{j as _$LH,b as html,T as mathml,E as noChange,A as nothing,D as render,w as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as r}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=globalThis;class i extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return r}}i._$litElement$=!0,i[\"finalized\"]=!0,s.litElementHydrateSupport?.({LitElement:i});const o=s.litElementPolyfillSupport;o?.({LitElement:i});const n={_$AK:(t,e,r)=>{t._$AK(e,r)},_$AL:t=>t._$AL};(s.litElementVersions??=[]).push(\"4.2.2\");export{i as LitElement,n as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=t=>(e,o)=>{void 0!==o?o.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};export{t as customElement};\n//# sourceMappingURL=custom-element.js.map\n","import{notEqual as t,defaultConverter as e}from\"../reactive-element.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o={attribute:!0,type:String,converter:e,reflect:!1,hasChanged:t},r=(t=o,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),\"setter\"===n&&((t=Object.create(t)).wrapped=!0),s.set(r.name,t),\"accessor\"===n){const{name:o}=r;return{set(r){const n=e.get.call(this);e.set.call(this,r),this.requestUpdate(o,n,t,!0,r)},init(e){return void 0!==e&&this.C(o,void 0,t,e),e}}}if(\"setter\"===n){const{name:o}=r;return function(r){const n=this[o];e.call(this,r),this.requestUpdate(o,n,t,!0,r)}}throw Error(\"Unsupported decorator location: \"+n)};function n(t){return(e,o)=>\"object\"==typeof o?r(t,e,o):((t,e,o)=>{const r=e.hasOwnProperty(o);return e.constructor.createProperty(o,t),r?Object.getOwnPropertyDescriptor(e,o):void 0})(t,e,o)}export{n as property,r as standardProperty};\n//# sourceMappingURL=property.js.map\n","import{property as t}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function r(r){return t({...r,state:!0,attribute:!1})}export{r as state};\n//# sourceMappingURL=state.js.map\n","/**\n * Type definitions for Home Assistant and Med Expert\n */\n\nexport interface HomeAssistant {\n  states: { [entity_id: string]: HassEntity };\n  callService: (domain: string, service: string, serviceData?: object) => Promise<void>;\n  callWS: (msg: object) => Promise<unknown>;\n  language: string;\n  themes: Record<string, unknown>;\n  panelUrl: string;\n  user?: {\n    id: string;\n    name: string;\n    is_admin: boolean;\n  };\n  config: {\n    latitude: number;\n    longitude: number;\n    elevation: number;\n    unit_system: {\n      length: string;\n      mass: string;\n      temperature: string;\n      volume: string;\n    };\n    location_name: string;\n    time_zone: string;\n    version: string;\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type HassEntityAttributes = Record<string, any>;\n\nexport interface HassEntity {\n  entity_id: string;\n  state: string;\n  attributes: HassEntityAttributes;\n  context: {\n    id: string;\n    parent_id?: string;\n    user_id?: string;\n  };\n  last_changed: string;\n  last_updated: string;\n}\n\nexport interface LovelaceCard {\n  hass?: HomeAssistant;\n  setConfig(config: Record<string, unknown>): void;\n  getCardSize?(): number;\n}\n\n// ============================================================================\n// Med Expert Domain Types\n// ============================================================================\n\nexport type ScheduleKind = 'times_per_day' | 'interval' | 'weekly' | 'as_needed' | 'depot';\nexport type MedicationStatus = 'ok' | 'due' | 'snoozed' | 'missed' | 'prn';\nexport type DosageForm = 'tablet' | 'capsule' | 'injection' | 'nasal_spray' | 'inhaler' | 'drops' | 'cream' | 'patch' | 'suppository' | 'liquid' | 'powder' | 'other';\n\nexport interface DoseQuantity {\n  numerator: number;\n  denominator: number;\n  unit: string;\n}\n\nexport interface Medication {\n  medication_id: string;\n  display_name: string;\n  form?: DosageForm;\n  default_unit?: string;\n  schedule_kind: ScheduleKind;\n  status: MedicationStatus;\n  next_due?: string;\n  next_dose?: DoseQuantity;\n  inventory?: {\n    current_quantity: number;\n    unit: string;\n    refill_threshold: number;\n  };\n  notes?: string;\n  is_active: boolean;\n}\n\nexport interface MedicationFormData {\n  // Step 1: Form Type\n  form: DosageForm;\n  \n  // Step 2: Details\n  display_name: string;\n  strength?: string;\n  strength_unit?: string;\n  dose_numerator: number;\n  dose_denominator: number;\n  dose_unit: string;\n  notes?: string;\n  \n  // Step 3: Schedule\n  schedule_kind: ScheduleKind;\n  times?: string[];\n  weekdays?: number[];\n  interval_minutes?: number;\n  \n  // Step 4: Inventory & Reminders\n  track_inventory: boolean;\n  current_quantity?: number;\n  refill_threshold?: number;\n  grace_minutes: number;\n  snooze_minutes: number;\n}\n\nexport interface Profile {\n  profile_id: string;\n  name: string;\n  entry_id: string;\n  medications: Medication[];\n  adherence_rate?: number;\n}\n\n// Dosage form metadata for UI\nexport const DOSAGE_FORMS: Record<DosageForm, { icon: string; label: string; units: string[] }> = {\n  tablet: { icon: '', label: 'Tablette', units: ['tablet', 'mg', 'g'] },\n  capsule: { icon: '', label: 'Kapsel', units: ['capsule', 'mg', 'g'] },\n  injection: { icon: '', label: 'Spritze', units: ['ml', 'IU', 'mg', 'unit'] },\n  nasal_spray: { icon: '', label: 'Nasenspray', units: ['spray', 'puff'] },\n  inhaler: { icon: '', label: 'Inhalator', units: ['puff', 'mcg'] },\n  drops: { icon: '', label: 'Tropfen', units: ['drop', 'ml'] },\n  cream: { icon: '', label: 'Creme/Salbe', units: ['application', 'g'] },\n  patch: { icon: '', label: 'Pflaster', units: ['patch'] },\n  suppository: { icon: '', label: 'Zpfchen', units: ['suppository'] },\n  liquid: { icon: '', label: 'Saft/Lsung', units: ['ml', 'teaspoon', 'tablespoon'] },\n  powder: { icon: '', label: 'Pulver', units: ['sachet', 'scoop', 'g'] },\n  other: { icon: '', label: 'Sonstige', units: ['unit', 'dose', 'application'] },\n};\n\nexport const SCHEDULE_TYPES: Record<ScheduleKind, { icon: string; label: string; description: string }> = {\n  times_per_day: { icon: '', label: 'Tglich zu festen Zeiten', description: 'z.B. 8:00, 12:00, 18:00' },\n  interval: { icon: '', label: 'Alle X Stunden', description: 'z.B. alle 8 Stunden' },\n  weekly: { icon: '', label: 'Bestimmte Wochentage', description: 'z.B. Mo, Mi, Fr' },\n  as_needed: { icon: '', label: 'Bei Bedarf (PRN)', description: 'Nur wenn ntig' },\n  depot: { icon: '', label: 'Depot-Injektion', description: 'Termin-basiert (z.B. monatlich)' },\n};\n\nexport const WEEKDAYS = [\n  { value: 0, short: 'Mo', long: 'Montag' },\n  { value: 1, short: 'Di', long: 'Dienstag' },\n  { value: 2, short: 'Mi', long: 'Mittwoch' },\n  { value: 3, short: 'Do', long: 'Donnerstag' },\n  { value: 4, short: 'Fr', long: 'Freitag' },\n  { value: 5, short: 'Sa', long: 'Samstag' },\n  { value: 6, short: 'So', long: 'Sonntag' },\n];\n\nexport const DOSE_PRESETS = [\n  { label: '', numerator: 1, denominator: 4 },\n  { label: '', numerator: 1, denominator: 2 },\n  { label: '1', numerator: 1, denominator: 1 },\n  { label: '1', numerator: 3, denominator: 2 },\n  { label: '2', numerator: 2, denominator: 1 },\n];\n","import { LitElement, html, css } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { \n  HomeAssistant, \n  DosageForm, \n  ScheduleKind,\n  MedicationFormData,\n  DOSAGE_FORMS,\n  SCHEDULE_TYPES,\n  WEEKDAYS,\n  DOSE_PRESETS,\n} from './types';\n\n/**\n * Add Medication Wizard - 4-step wizard for adding medications\n */\n@customElement('add-medication-wizard')\nexport class AddMedicationWizard extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n  @property({ type: String }) public entryId!: string;\n  \n  @state() private _step = 1;\n  @state() private _saving = false;\n  @state() private _error: string | null = null;\n  \n  // Form data\n  @state() private _formData: MedicationFormData = {\n    form: 'tablet',\n    display_name: '',\n    dose_numerator: 1,\n    dose_denominator: 1,\n    dose_unit: 'tablet',\n    schedule_kind: 'times_per_day',\n    times: ['08:00'],\n    weekdays: [0, 1, 2, 3, 4], // Mo-Fr\n    interval_minutes: 480, // 8 hours\n    track_inventory: false,\n    current_quantity: 30,\n    refill_threshold: 7,\n    grace_minutes: 30,\n    snooze_minutes: 10,\n  };\n\n  static styles = css`\n    :host {\n      display: block;\n    }\n\n    .wizard-container {\n      background: var(--card-background-color);\n      border-radius: 12px;\n      overflow: hidden;\n      max-width: 500px;\n      margin: 0 auto;\n    }\n\n    .wizard-header {\n      background: var(--primary-color);\n      color: var(--text-primary-color);\n      padding: 16px 20px;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .wizard-header h2 {\n      margin: 0;\n      font-size: 18px;\n      font-weight: 500;\n    }\n\n    .step-indicator {\n      font-size: 14px;\n      opacity: 0.9;\n    }\n\n    .wizard-content {\n      padding: 24px;\n      min-height: 300px;\n    }\n\n    .wizard-footer {\n      padding: 16px 24px;\n      display: flex;\n      justify-content: space-between;\n      border-top: 1px solid var(--divider-color);\n    }\n\n    .step-title {\n      font-size: 16px;\n      font-weight: 500;\n      margin-bottom: 20px;\n      color: var(--primary-text-color);\n    }\n\n    /* Form Grid */\n    .form-grid {\n      display: grid;\n      grid-template-columns: repeat(3, 1fr);\n      gap: 12px;\n    }\n\n    .form-grid-2 {\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      gap: 12px;\n    }\n\n    /* Form Type Cards */\n    .form-type-card {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: 16px 8px;\n      border: 2px solid var(--divider-color);\n      border-radius: 8px;\n      cursor: pointer;\n      transition: all 0.2s;\n      background: var(--card-background-color);\n    }\n\n    .form-type-card:hover {\n      border-color: var(--primary-color);\n      background: var(--secondary-background-color);\n    }\n\n    .form-type-card.selected {\n      border-color: var(--primary-color);\n      background: rgba(var(--rgb-primary-color), 0.1);\n    }\n\n    .form-type-icon {\n      font-size: 32px;\n      margin-bottom: 8px;\n    }\n\n    .form-type-label {\n      font-size: 12px;\n      text-align: center;\n      color: var(--primary-text-color);\n    }\n\n    /* Input Fields */\n    .field {\n      margin-bottom: 16px;\n    }\n\n    .field label {\n      display: block;\n      font-size: 12px;\n      font-weight: 500;\n      color: var(--secondary-text-color);\n      margin-bottom: 6px;\n      text-transform: uppercase;\n    }\n\n    .field input, .field select {\n      width: 100%;\n      padding: 12px;\n      border: 1px solid var(--divider-color);\n      border-radius: 8px;\n      font-size: 16px;\n      background: var(--card-background-color);\n      color: var(--primary-text-color);\n      box-sizing: border-box;\n    }\n\n    .field input:focus, .field select:focus {\n      outline: none;\n      border-color: var(--primary-color);\n    }\n\n    .field-row {\n      display: flex;\n      gap: 12px;\n    }\n\n    .field-row .field {\n      flex: 1;\n    }\n\n    /* Dose Presets */\n    .dose-presets {\n      display: flex;\n      gap: 8px;\n      flex-wrap: wrap;\n    }\n\n    .dose-preset {\n      padding: 10px 16px;\n      border: 2px solid var(--divider-color);\n      border-radius: 8px;\n      cursor: pointer;\n      font-size: 16px;\n      font-weight: 500;\n      background: var(--card-background-color);\n      color: var(--primary-text-color);\n      transition: all 0.2s;\n    }\n\n    .dose-preset:hover {\n      border-color: var(--primary-color);\n    }\n\n    .dose-preset.selected {\n      border-color: var(--primary-color);\n      background: var(--primary-color);\n      color: var(--text-primary-color);\n    }\n\n    /* Schedule Type Options */\n    .schedule-option {\n      display: flex;\n      align-items: flex-start;\n      padding: 12px;\n      border: 2px solid var(--divider-color);\n      border-radius: 8px;\n      cursor: pointer;\n      margin-bottom: 8px;\n      transition: all 0.2s;\n    }\n\n    .schedule-option:hover {\n      border-color: var(--primary-color);\n    }\n\n    .schedule-option.selected {\n      border-color: var(--primary-color);\n      background: rgba(var(--rgb-primary-color), 0.1);\n    }\n\n    .schedule-option-icon {\n      font-size: 24px;\n      margin-right: 12px;\n    }\n\n    .schedule-option-content {\n      flex: 1;\n    }\n\n    .schedule-option-label {\n      font-weight: 500;\n      color: var(--primary-text-color);\n    }\n\n    .schedule-option-desc {\n      font-size: 12px;\n      color: var(--secondary-text-color);\n      margin-top: 2px;\n    }\n\n    /* Weekday Toggles */\n    .weekday-toggles {\n      display: flex;\n      gap: 6px;\n      flex-wrap: wrap;\n    }\n\n    .weekday-toggle {\n      width: 44px;\n      height: 44px;\n      border: 2px solid var(--divider-color);\n      border-radius: 8px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      font-weight: 500;\n      font-size: 14px;\n      background: var(--card-background-color);\n      color: var(--primary-text-color);\n      transition: all 0.2s;\n    }\n\n    .weekday-toggle:hover {\n      border-color: var(--primary-color);\n    }\n\n    .weekday-toggle.selected {\n      border-color: var(--primary-color);\n      background: var(--primary-color);\n      color: var(--text-primary-color);\n    }\n\n    /* Time Inputs */\n    .time-inputs {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 8px;\n      align-items: center;\n    }\n\n    .time-input-wrapper {\n      position: relative;\n      display: flex;\n      align-items: center;\n    }\n\n    .time-input {\n      width: 100px;\n      padding: 10px 12px;\n      border: 1px solid var(--divider-color);\n      border-radius: 8px;\n      font-size: 16px;\n      background: var(--card-background-color);\n      color: var(--primary-text-color);\n    }\n\n    .remove-time {\n      position: absolute;\n      right: -8px;\n      top: -8px;\n      width: 20px;\n      height: 20px;\n      border-radius: 50%;\n      background: var(--error-color);\n      color: white;\n      border: none;\n      cursor: pointer;\n      font-size: 12px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .add-time-btn {\n      padding: 10px 16px;\n      border: 2px dashed var(--divider-color);\n      border-radius: 8px;\n      background: transparent;\n      color: var(--primary-color);\n      cursor: pointer;\n      font-size: 14px;\n      transition: all 0.2s;\n    }\n\n    .add-time-btn:hover {\n      border-color: var(--primary-color);\n      background: rgba(var(--rgb-primary-color), 0.1);\n    }\n\n    /* Checkbox */\n    .checkbox-field {\n      display: flex;\n      align-items: center;\n      padding: 12px;\n      border: 1px solid var(--divider-color);\n      border-radius: 8px;\n      cursor: pointer;\n      margin-bottom: 16px;\n    }\n\n    .checkbox-field input {\n      width: 20px;\n      height: 20px;\n      margin-right: 12px;\n    }\n\n    .checkbox-field span {\n      color: var(--primary-text-color);\n    }\n\n    /* Buttons */\n    .btn {\n      padding: 12px 24px;\n      border: none;\n      border-radius: 8px;\n      font-size: 14px;\n      font-weight: 500;\n      cursor: pointer;\n      transition: all 0.2s;\n    }\n\n    .btn-primary {\n      background: var(--primary-color);\n      color: var(--text-primary-color);\n    }\n\n    .btn-primary:hover {\n      filter: brightness(1.1);\n    }\n\n    .btn-primary:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n\n    .btn-secondary {\n      background: var(--secondary-background-color);\n      color: var(--primary-text-color);\n    }\n\n    .btn-secondary:hover {\n      background: var(--divider-color);\n    }\n\n    .btn-text {\n      background: transparent;\n      color: var(--primary-color);\n      padding: 12px 16px;\n    }\n\n    /* Error */\n    .error {\n      background: var(--error-color);\n      color: white;\n      padding: 12px;\n      border-radius: 8px;\n      margin-bottom: 16px;\n    }\n\n    /* Success */\n    .success-message {\n      text-align: center;\n      padding: 40px 20px;\n    }\n\n    .success-icon {\n      font-size: 64px;\n      margin-bottom: 16px;\n    }\n\n    .success-message h3 {\n      margin: 0 0 8px;\n      color: var(--primary-text-color);\n    }\n\n    .success-message p {\n      color: var(--secondary-text-color);\n      margin: 0 0 24px;\n    }\n  `;\n\n  render() {\n    return html`\n      <div class=\"wizard-container\">\n        <div class=\"wizard-header\">\n          <h2>Medikament hinzufgen</h2>\n          <span class=\"step-indicator\">${this._step}/4</span>\n        </div>\n\n        <div class=\"wizard-content\">\n          ${this._error ? html`<div class=\"error\">${this._error}</div>` : ''}\n          \n          ${this._step === 1 ? this._renderStep1() : ''}\n          ${this._step === 2 ? this._renderStep2() : ''}\n          ${this._step === 3 ? this._renderStep3() : ''}\n          ${this._step === 4 ? this._renderStep4() : ''}\n          ${this._step === 5 ? this._renderSuccess() : ''}\n        </div>\n\n        ${this._step < 5 ? html`\n          <div class=\"wizard-footer\">\n            ${this._step > 1 \n              ? html`<button class=\"btn btn-secondary\" @click=${this._prevStep}> Zurck</button>`\n              : html`<button class=\"btn btn-text\" @click=${this._close}>Abbrechen</button>`\n            }\n            \n            ${this._step < 4 \n              ? html`<button class=\"btn btn-primary\" @click=${this._nextStep} ?disabled=${!this._canProceed()}>Weiter </button>`\n              : html`<button class=\"btn btn-primary\" @click=${this._save} ?disabled=${this._saving}>\n                  ${this._saving ? 'Speichern...' : ' Medikament speichern'}\n                </button>`\n            }\n          </div>\n        ` : ''}\n      </div>\n    `;\n  }\n\n  private _renderStep1() {\n    const forms = Object.entries(DOSAGE_FORMS) as [DosageForm, typeof DOSAGE_FORMS['tablet']][];\n    \n    return html`\n      <div class=\"step-title\">Was mchtest du hinzufgen?</div>\n      <div class=\"form-grid\">\n        ${forms.map(([key, form]) => html`\n          <div \n            class=\"form-type-card ${this._formData.form === key ? 'selected' : ''}\"\n            @click=${() => this._selectForm(key)}\n          >\n            <span class=\"form-type-icon\">${form.icon}</span>\n            <span class=\"form-type-label\">${form.label}</span>\n          </div>\n        `)}\n      </div>\n    `;\n  }\n\n  private _renderStep2() {\n    const formInfo = DOSAGE_FORMS[this._formData.form];\n    \n    return html`\n      <div class=\"step-title\">${formInfo.icon} ${formInfo.label} - Details</div>\n      \n      <div class=\"field\">\n        <label>Name *</label>\n        <input \n          type=\"text\" \n          placeholder=\"z.B. Metformin\"\n          .value=${this._formData.display_name}\n          @input=${(e: Event) => this._updateField('display_name', (e.target as HTMLInputElement).value)}\n        />\n      </div>\n\n      <div class=\"field-row\">\n        <div class=\"field\">\n          <label>Strke (optional)</label>\n          <input \n            type=\"text\" \n            placeholder=\"z.B. 500\"\n            .value=${this._formData.strength || ''}\n            @input=${(e: Event) => this._updateField('strength', (e.target as HTMLInputElement).value)}\n          />\n        </div>\n        <div class=\"field\">\n          <label>Einheit</label>\n          <select \n            .value=${this._formData.strength_unit || 'mg'}\n            @change=${(e: Event) => this._updateField('strength_unit', (e.target as HTMLSelectElement).value)}\n          >\n            <option value=\"mg\">mg</option>\n            <option value=\"g\">g</option>\n            <option value=\"mcg\">mcg</option>\n            <option value=\"ml\">ml</option>\n            <option value=\"IU\">IU</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"field\">\n        <label>Dosis pro Einnahme</label>\n        <div class=\"dose-presets\">\n          ${DOSE_PRESETS.map(preset => html`\n            <div \n              class=\"dose-preset ${this._formData.dose_numerator === preset.numerator && this._formData.dose_denominator === preset.denominator ? 'selected' : ''}\"\n              @click=${() => this._selectDose(preset.numerator, preset.denominator)}\n            >\n              ${preset.label}\n            </div>\n          `)}\n        </div>\n      </div>\n\n      <div class=\"field\">\n        <label>Einheit</label>\n        <select \n          .value=${this._formData.dose_unit}\n          @change=${(e: Event) => this._updateField('dose_unit', (e.target as HTMLSelectElement).value)}\n        >\n          ${formInfo.units.map(unit => html`\n            <option value=${unit}>${unit}</option>\n          `)}\n        </select>\n      </div>\n\n      <div class=\"field\">\n        <label>Notizen (optional)</label>\n        <input \n          type=\"text\" \n          placeholder=\"z.B. Mit dem Essen einnehmen\"\n          .value=${this._formData.notes || ''}\n          @input=${(e: Event) => this._updateField('notes', (e.target as HTMLInputElement).value)}\n        />\n      </div>\n    `;\n  }\n\n  private _renderStep3() {\n    return html`\n      <div class=\"step-title\">Wann nimmst du ${this._formData.display_name || 'dieses Medikament'}?</div>\n      \n      ${(Object.entries(SCHEDULE_TYPES) as [ScheduleKind, typeof SCHEDULE_TYPES['times_per_day']][]).map(([key, type]) => html`\n        <div \n          class=\"schedule-option ${this._formData.schedule_kind === key ? 'selected' : ''}\"\n          @click=${() => this._updateField('schedule_kind', key)}\n        >\n          <span class=\"schedule-option-icon\">${type.icon}</span>\n          <div class=\"schedule-option-content\">\n            <div class=\"schedule-option-label\">${type.label}</div>\n            <div class=\"schedule-option-desc\">${type.description}</div>\n          </div>\n        </div>\n      `)}\n\n      ${this._formData.schedule_kind === 'times_per_day' ? this._renderTimesInput() : ''}\n      ${this._formData.schedule_kind === 'weekly' ? this._renderWeeklyInput() : ''}\n      ${this._formData.schedule_kind === 'interval' ? this._renderIntervalInput() : ''}\n    `;\n  }\n\n  private _renderTimesInput() {\n    return html`\n      <div class=\"field\" style=\"margin-top: 16px;\">\n        <label>Um welche Uhrzeit(en)?</label>\n        <div class=\"time-inputs\">\n          ${(this._formData.times || []).map((time, index) => html`\n            <div class=\"time-input-wrapper\">\n              <input \n                type=\"time\" \n                class=\"time-input\"\n                .value=${time}\n                @change=${(e: Event) => this._updateTime(index, (e.target as HTMLInputElement).value)}\n              />\n              ${(this._formData.times?.length || 0) > 1 ? html`\n                <button class=\"remove-time\" @click=${() => this._removeTime(index)}></button>\n              ` : ''}\n            </div>\n          `)}\n          <button class=\"add-time-btn\" @click=${this._addTime}>+ Zeit</button>\n        </div>\n      </div>\n    `;\n  }\n\n  private _renderWeeklyInput() {\n    return html`\n      <div class=\"field\" style=\"margin-top: 16px;\">\n        <label>An welchen Tagen?</label>\n        <div class=\"weekday-toggles\">\n          ${WEEKDAYS.map(day => html`\n            <div \n              class=\"weekday-toggle ${(this._formData.weekdays || []).includes(day.value) ? 'selected' : ''}\"\n              @click=${() => this._toggleWeekday(day.value)}\n            >\n              ${day.short}\n            </div>\n          `)}\n        </div>\n      </div>\n      ${this._renderTimesInput()}\n    `;\n  }\n\n  private _renderIntervalInput() {\n    return html`\n      <div class=\"field\" style=\"margin-top: 16px;\">\n        <label>Alle wie viele Stunden?</label>\n        <div class=\"dose-presets\">\n          ${[4, 6, 8, 12, 24].map(hours => html`\n            <div \n              class=\"dose-preset ${this._formData.interval_minutes === hours * 60 ? 'selected' : ''}\"\n              @click=${() => this._updateField('interval_minutes', hours * 60)}\n            >\n              ${hours}h\n            </div>\n          `)}\n        </div>\n      </div>\n    `;\n  }\n\n  private _renderStep4() {\n    return html`\n      <div class=\"step-title\">Bestand & Erinnerungen</div>\n      \n      <label class=\"checkbox-field\" @click=${() => this._updateField('track_inventory', !this._formData.track_inventory)}>\n        <input type=\"checkbox\" .checked=${this._formData.track_inventory} />\n        <span>Bestand verwalten</span>\n      </label>\n\n      ${this._formData.track_inventory ? html`\n        <div class=\"field-row\">\n          <div class=\"field\">\n            <label>Aktueller Bestand</label>\n            <input \n              type=\"number\" \n              min=\"0\"\n              .value=${String(this._formData.current_quantity || 0)}\n              @input=${(e: Event) => this._updateField('current_quantity', parseInt((e.target as HTMLInputElement).value) || 0)}\n            />\n          </div>\n          <div class=\"field\">\n            <label>Warnen unter</label>\n            <input \n              type=\"number\" \n              min=\"1\"\n              .value=${String(this._formData.refill_threshold || 7)}\n              @input=${(e: Event) => this._updateField('refill_threshold', parseInt((e.target as HTMLInputElement).value) || 7)}\n            />\n          </div>\n        </div>\n      ` : ''}\n\n      <div class=\"field\">\n        <label>Gnadenfrist (Minuten)</label>\n        <div class=\"dose-presets\">\n          ${[10, 15, 30, 60].map(mins => html`\n            <div \n              class=\"dose-preset ${this._formData.grace_minutes === mins ? 'selected' : ''}\"\n              @click=${() => this._updateField('grace_minutes', mins)}\n            >\n              ${mins} min\n            </div>\n          `)}\n        </div>\n        <small style=\"color: var(--secondary-text-color); font-size: 11px; margin-top: 4px; display: block;\">\n          Zeit nach Flligkeit bevor als \"verpasst\" markiert\n        </small>\n      </div>\n\n      <div class=\"field\">\n        <label>Snooze-Dauer (Minuten)</label>\n        <div class=\"dose-presets\">\n          ${[5, 10, 15, 30].map(mins => html`\n            <div \n              class=\"dose-preset ${this._formData.snooze_minutes === mins ? 'selected' : ''}\"\n              @click=${() => this._updateField('snooze_minutes', mins)}\n            >\n              ${mins} min\n            </div>\n          `)}\n        </div>\n      </div>\n    `;\n  }\n\n  private _renderSuccess() {\n    return html`\n      <div class=\"success-message\">\n        <div class=\"success-icon\"></div>\n        <h3>${this._formData.display_name} hinzugefgt!</h3>\n        <p>Das Medikament wurde erfolgreich angelegt.</p>\n        <button class=\"btn btn-primary\" @click=${this._addAnother}>+ Weiteres hinzufgen</button>\n        <button class=\"btn btn-text\" @click=${this._close}>Fertig</button>\n      </div>\n    `;\n  }\n\n  // Form helpers\n  private _selectForm(form: DosageForm) {\n    const formInfo = DOSAGE_FORMS[form];\n    this._formData = {\n      ...this._formData,\n      form,\n      dose_unit: formInfo.units[0],\n    };\n    this.requestUpdate();\n  }\n\n  private _selectDose(numerator: number, denominator: number) {\n    this._formData = {\n      ...this._formData,\n      dose_numerator: numerator,\n      dose_denominator: denominator,\n    };\n    this.requestUpdate();\n  }\n\n  private _updateField<K extends keyof MedicationFormData>(field: K, value: MedicationFormData[K]) {\n    this._formData = {\n      ...this._formData,\n      [field]: value,\n    };\n    this.requestUpdate();\n  }\n\n  private _addTime() {\n    const times = [...(this._formData.times || []), '12:00'];\n    this._updateField('times', times);\n  }\n\n  private _removeTime(index: number) {\n    const times = [...(this._formData.times || [])];\n    times.splice(index, 1);\n    this._updateField('times', times);\n  }\n\n  private _updateTime(index: number, value: string) {\n    const times = [...(this._formData.times || [])];\n    times[index] = value;\n    this._updateField('times', times);\n  }\n\n  private _toggleWeekday(day: number) {\n    const weekdays = [...(this._formData.weekdays || [])];\n    const index = weekdays.indexOf(day);\n    if (index >= 0) {\n      weekdays.splice(index, 1);\n    } else {\n      weekdays.push(day);\n      weekdays.sort();\n    }\n    this._updateField('weekdays', weekdays);\n  }\n\n  // Navigation\n  private _canProceed(): boolean {\n    switch (this._step) {\n      case 1:\n        return !!this._formData.form;\n      case 2:\n        return !!this._formData.display_name.trim();\n      case 3:\n        if (this._formData.schedule_kind === 'as_needed') return true;\n        if (this._formData.schedule_kind === 'times_per_day') {\n          return (this._formData.times?.length || 0) > 0;\n        }\n        if (this._formData.schedule_kind === 'weekly') {\n          return (this._formData.weekdays?.length || 0) > 0 && (this._formData.times?.length || 0) > 0;\n        }\n        if (this._formData.schedule_kind === 'interval') {\n          return (this._formData.interval_minutes || 0) > 0;\n        }\n        return true;\n      default:\n        return true;\n    }\n  }\n\n  private _nextStep() {\n    if (this._canProceed()) {\n      this._step++;\n      this._error = null;\n    }\n  }\n\n  private _prevStep() {\n    if (this._step > 1) {\n      this._step--;\n      this._error = null;\n    }\n  }\n\n  private async _save() {\n    this._saving = true;\n    this._error = null;\n\n    try {\n      // Build the service call data\n      const displayName = this._formData.strength \n        ? `${this._formData.display_name} ${this._formData.strength}${this._formData.strength_unit || 'mg'}`\n        : this._formData.display_name;\n\n      const serviceData: Record<string, unknown> = {\n        entry_id: this.entryId,\n        display_name: displayName,\n        schedule_kind: this._formData.schedule_kind,\n        form: this._formData.form,\n        default_dose: {\n          numerator: this._formData.dose_numerator,\n          denominator: this._formData.dose_denominator,\n          unit: this._formData.dose_unit,\n        },\n        policy: {\n          grace_minutes: this._formData.grace_minutes,\n          snooze_minutes: this._formData.snooze_minutes,\n        },\n      };\n\n      // Add schedule-specific fields\n      if (this._formData.schedule_kind === 'times_per_day' || this._formData.schedule_kind === 'weekly') {\n        serviceData.times = this._formData.times;\n      }\n      if (this._formData.schedule_kind === 'weekly') {\n        serviceData.weekdays = this._formData.weekdays;\n      }\n      if (this._formData.schedule_kind === 'interval' || this._formData.schedule_kind === 'depot') {\n        serviceData.interval_minutes = this._formData.interval_minutes;\n      }\n\n      // Add inventory if tracking\n      if (this._formData.track_inventory) {\n        serviceData.inventory = {\n          current_quantity: this._formData.current_quantity,\n          refill_threshold: this._formData.refill_threshold,\n          auto_decrement: true,\n        };\n      }\n\n      // Add notes if present\n      if (this._formData.notes) {\n        serviceData.notes = this._formData.notes;\n      }\n\n      // Call the service\n      await this.hass.callService('med_expert', 'add_medication', serviceData);\n      \n      this._step = 5; // Success\n    } catch (error) {\n      this._error = `Fehler beim Speichern: ${error}`;\n    } finally {\n      this._saving = false;\n    }\n  }\n\n  private _addAnother() {\n    // Reset form\n    this._formData = {\n      form: 'tablet',\n      display_name: '',\n      dose_numerator: 1,\n      dose_denominator: 1,\n      dose_unit: 'tablet',\n      schedule_kind: 'times_per_day',\n      times: ['08:00'],\n      weekdays: [0, 1, 2, 3, 4],\n      interval_minutes: 480,\n      track_inventory: false,\n      current_quantity: 30,\n      refill_threshold: 7,\n      grace_minutes: 30,\n      snooze_minutes: 10,\n    };\n    this._step = 1;\n    this._error = null;\n  }\n\n  private _close() {\n    this.dispatchEvent(new CustomEvent('close'));\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'add-medication-wizard': AddMedicationWizard;\n  }\n}\n","import { LitElement, html, css } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { HomeAssistant, MedicationStatus, DOSAGE_FORMS, HassEntityAttributes } from './types';\n// Import wizard component\nimport './add-medication-wizard';\n\ntype TabType = 'today' | 'calendar' | 'profile' | 'meds';\n\ninterface ProfileInfo {\n  entry_id: string;\n  title: string;\n  state: string;\n}\n\ninterface ParsedMedication {\n  entity_id: string;\n  medication_id: string;\n  entry_id: string;\n  name: string;\n  status: MedicationStatus;\n  next_due: Date | null;\n  next_dose: string;\n  form: string;\n  icon: string;\n  inventory?: {\n    current: number;\n    threshold: number;\n    low: boolean;\n  };\n  attributes: HassEntityAttributes;\n}\n\n/**\n * Med Expert Panel - Main frontend panel for medication management\n */\n@customElement('med-expert-panel')\nexport class MedExpertPanel extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n  @property({ type: Boolean }) public narrow = false;\n\n  @state() private _medications: ParsedMedication[] = [];\n  @state() private _loading = true;\n  @state() private _error: string | null = null;\n  @state() private _activeTab: TabType = 'today';\n  @state() private _showWizard = false;\n  @state() private _entryId: string | null = null;\n  @state() private _profiles: ProfileInfo[] = [];\n  @state() private _currentProfile: ProfileInfo | null = null;\n\n  static styles = css`\n    :host {\n      display: block;\n      min-height: 100vh;\n      background-color: var(--primary-background-color);\n      color: var(--primary-text-color);\n    }\n\n    /* App Container */\n    .app-container {\n      max-width: 600px;\n      margin: 0 auto;\n      padding-bottom: 80px;\n    }\n\n    /* Header */\n    .header {\n      background: linear-gradient(135deg, var(--primary-color), var(--accent-color, var(--primary-color)));\n      color: var(--text-primary-color);\n      padding: 20px;\n      padding-top: max(20px, env(safe-area-inset-top));\n    }\n\n    .header-top {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .header h1 {\n      margin: 0;\n      font-size: 24px;\n      font-weight: 600;\n    }\n\n    .header-subtitle {\n      opacity: 0.9;\n      margin-top: 4px;\n      font-size: 14px;\n    }\n\n    .add-btn {\n      width: 48px;\n      height: 48px;\n      border-radius: 50%;\n      background: rgba(255,255,255,0.2);\n      border: none;\n      color: white;\n      font-size: 24px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      transition: all 0.2s;\n    }\n\n    .add-btn:hover {\n      background: rgba(255,255,255,0.3);\n      transform: scale(1.05);\n    }\n\n    /* Stats Bar */\n    .stats-bar {\n      display: flex;\n      justify-content: space-around;\n      padding: 16px;\n      margin-top: 12px;\n      background: rgba(255,255,255,0.1);\n      border-radius: 12px;\n    }\n\n    .stat {\n      text-align: center;\n    }\n\n    .stat-value {\n      font-size: 24px;\n      font-weight: 700;\n    }\n\n    .stat-label {\n      font-size: 11px;\n      opacity: 0.9;\n      text-transform: uppercase;\n    }\n\n    /* Tab Navigation */\n    .tab-nav {\n      display: flex;\n      background: var(--card-background-color);\n      border-bottom: 1px solid var(--divider-color);\n      position: sticky;\n      top: 0;\n      z-index: 10;\n    }\n\n    .tab {\n      flex: 1;\n      padding: 14px 8px;\n      text-align: center;\n      cursor: pointer;\n      border: none;\n      background: none;\n      color: var(--secondary-text-color);\n      font-size: 12px;\n      font-weight: 500;\n      transition: all 0.2s;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 4px;\n    }\n\n    .tab.active {\n      color: var(--primary-color);\n      border-bottom: 2px solid var(--primary-color);\n    }\n\n    .tab-icon {\n      font-size: 20px;\n    }\n\n    /* Content */\n    .content {\n      padding: 16px;\n    }\n\n    /* Section */\n    .section {\n      margin-bottom: 24px;\n    }\n\n    .section-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 12px;\n    }\n\n    .section-title {\n      font-size: 13px;\n      font-weight: 600;\n      color: var(--secondary-text-color);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .section-badge {\n      background: var(--error-color);\n      color: white;\n      font-size: 11px;\n      font-weight: 600;\n      padding: 2px 8px;\n      border-radius: 10px;\n    }\n\n    /* Medication Cards */\n    .med-card {\n      background: var(--card-background-color);\n      border-radius: 12px;\n      padding: 16px;\n      margin-bottom: 12px;\n      box-shadow: var(--ha-card-box-shadow, 0 2px 4px rgba(0,0,0,0.1));\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      transition: transform 0.2s, box-shadow 0.2s;\n    }\n\n    .med-card:active {\n      transform: scale(0.98);\n    }\n\n    .med-card.urgent {\n      border-left: 4px solid var(--error-color);\n    }\n\n    .med-card.due {\n      border-left: 4px solid var(--warning-color);\n    }\n\n    .med-card.done {\n      opacity: 0.6;\n    }\n\n    .med-icon {\n      width: 48px;\n      height: 48px;\n      border-radius: 12px;\n      background: var(--secondary-background-color);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 24px;\n      flex-shrink: 0;\n    }\n\n    .med-info {\n      flex: 1;\n      min-width: 0;\n    }\n\n    .med-name {\n      font-weight: 600;\n      font-size: 16px;\n      margin-bottom: 2px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .med-dose {\n      color: var(--secondary-text-color);\n      font-size: 13px;\n    }\n\n    .med-time {\n      text-align: right;\n      flex-shrink: 0;\n    }\n\n    .med-time-value {\n      font-weight: 600;\n      font-size: 15px;\n      color: var(--primary-text-color);\n    }\n\n    .med-time-label {\n      font-size: 11px;\n      color: var(--secondary-text-color);\n    }\n\n    .med-time-overdue {\n      color: var(--error-color);\n    }\n\n    /* Action Buttons */\n    .med-actions {\n      display: flex;\n      gap: 8px;\n      margin-top: 12px;\n      padding-top: 12px;\n      border-top: 1px solid var(--divider-color);\n    }\n\n    .action-btn {\n      flex: 1;\n      padding: 10px;\n      border: none;\n      border-radius: 8px;\n      font-size: 14px;\n      font-weight: 500;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 6px;\n      transition: all 0.2s;\n    }\n\n    .action-btn.take {\n      background: var(--success-color, #4CAF50);\n      color: white;\n    }\n\n    .action-btn.snooze {\n      background: var(--secondary-background-color);\n      color: var(--primary-text-color);\n    }\n\n    .action-btn.skip {\n      background: var(--secondary-background-color);\n      color: var(--secondary-text-color);\n    }\n\n    .action-btn:hover {\n      filter: brightness(1.1);\n    }\n\n    /* Empty State */\n    .empty-state {\n      text-align: center;\n      padding: 60px 20px;\n    }\n\n    .empty-icon {\n      font-size: 72px;\n      margin-bottom: 16px;\n      opacity: 0.5;\n    }\n\n    .empty-title {\n      font-size: 18px;\n      font-weight: 600;\n      margin-bottom: 8px;\n    }\n\n    .empty-text {\n      color: var(--secondary-text-color);\n      margin-bottom: 24px;\n    }\n\n    .empty-btn {\n      display: inline-flex;\n      align-items: center;\n      gap: 8px;\n      padding: 12px 24px;\n      background: var(--primary-color);\n      color: var(--text-primary-color);\n      border: none;\n      border-radius: 8px;\n      font-size: 16px;\n      font-weight: 500;\n      cursor: pointer;\n    }\n\n    /* Loading */\n    .loading {\n      text-align: center;\n      padding: 60px 20px;\n      color: var(--secondary-text-color);\n    }\n\n    .loading-spinner {\n      font-size: 48px;\n      animation: spin 1s linear infinite;\n    }\n\n    @keyframes spin {\n      100% { transform: rotate(360deg); }\n    }\n\n    /* Error */\n    .error {\n      background: var(--error-color);\n      color: white;\n      padding: 12px 16px;\n      border-radius: 8px;\n      margin: 16px;\n    }\n\n    /* Wizard Overlay */\n    .wizard-overlay {\n      position: fixed;\n      inset: 0;\n      background: rgba(0,0,0,0.5);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 16px;\n      z-index: 100;\n    }\n\n    /* Medications List Tab */\n    .meds-list-item {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 12px 16px;\n      background: var(--card-background-color);\n      border-radius: 8px;\n      margin-bottom: 8px;\n      cursor: pointer;\n    }\n\n    .meds-list-item:hover {\n      background: var(--secondary-background-color);\n    }\n\n    .inventory-warning {\n      font-size: 11px;\n      color: var(--warning-color);\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      margin-top: 2px;\n    }\n\n    /* Calendar placeholder */\n    .calendar-placeholder, .stats-placeholder {\n      text-align: center;\n      padding: 40px;\n      color: var(--secondary-text-color);\n    }\n\n    /* Profile selector in header */\n    .profile-select {\n      background: rgba(255,255,255,0.2);\n      border: none;\n      color: inherit;\n      padding: 4px 8px;\n      border-radius: 4px;\n      font-size: 14px;\n      cursor: pointer;\n    }\n\n    .profile-select option {\n      color: var(--primary-text-color);\n      background: var(--card-background-color);\n    }\n\n    .profile-badge {\n      opacity: 0.9;\n    }\n\n    /* Profile Tab Styles */\n    .profile-card {\n      display: flex;\n      align-items: center;\n      gap: 16px;\n      padding: 20px;\n      background: var(--card-background-color);\n      border-radius: 12px;\n      margin-bottom: 16px;\n    }\n\n    .profile-avatar {\n      font-size: 48px;\n      width: 64px;\n      height: 64px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: var(--primary-color);\n      border-radius: 50%;\n    }\n\n    .profile-info {\n      flex: 1;\n    }\n\n    .profile-name {\n      font-size: 20px;\n      font-weight: 600;\n    }\n\n    .profile-status {\n      font-size: 14px;\n      color: var(--secondary-text-color);\n      margin-top: 4px;\n    }\n\n    .profile-stats {\n      display: flex;\n      gap: 16px;\n      padding: 12px 16px;\n      background: var(--card-background-color);\n      border-radius: 8px;\n      margin-bottom: 16px;\n    }\n\n    .profile-stat {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      font-size: 14px;\n    }\n\n    .stat-icon {\n      font-size: 18px;\n    }\n\n    .profile-list-item {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 12px 16px;\n      background: var(--card-background-color);\n      border-radius: 8px;\n      margin-bottom: 8px;\n      cursor: pointer;\n      transition: all 0.2s;\n    }\n\n    .profile-list-item:hover {\n      background: var(--secondary-background-color);\n    }\n\n    .profile-list-item.active {\n      border: 2px solid var(--primary-color);\n    }\n\n    .profile-avatar-small {\n      font-size: 24px;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: var(--secondary-background-color);\n      border-radius: 50%;\n    }\n\n    .profile-item-info {\n      flex: 1;\n    }\n\n    .profile-item-name {\n      font-weight: 500;\n    }\n\n    .profile-item-status {\n      font-size: 12px;\n      color: var(--secondary-text-color);\n    }\n\n    .check-mark {\n      color: var(--primary-color);\n      font-size: 20px;\n      font-weight: bold;\n    }\n\n    .profile-action-btn {\n      width: 100%;\n      padding: 14px;\n      background: var(--primary-color);\n      color: var(--text-primary-color);\n      border: none;\n      border-radius: 8px;\n      font-size: 16px;\n      font-weight: 500;\n      cursor: pointer;\n      transition: all 0.2s;\n    }\n\n    .profile-action-btn:hover {\n      opacity: 0.9;\n    }\n\n    .no-profile {\n      text-align: center;\n      padding: 40px;\n      color: var(--secondary-text-color);\n    }\n  `;\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._loadData();\n    \n    // Auto-refresh every 30 seconds\n    this._refreshInterval = setInterval(() => this._loadData(), 30000);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._refreshInterval) {\n      clearInterval(this._refreshInterval);\n    }\n  }\n\n  private _refreshInterval?: ReturnType<typeof setInterval>;\n\n  private async _loadData() {\n    try {\n      this._loading = this._medications.length === 0 && this._profiles.length === 0;\n      this._error = null;\n\n      // Load profiles from config entries via WebSocket\n      await this._loadProfiles();\n\n      // If no current profile selected but profiles exist, select first one\n      if (!this._currentProfile && this._profiles.length > 0) {\n        this._currentProfile = this._profiles[0];\n        this._entryId = this._currentProfile.entry_id;\n      }\n\n      // Fetch med_expert medication status sensors\n      // Med Expert sensors have 'medication_id' attribute - that's how we identify them\n      const entities = Object.keys(this.hass.states).filter((entity_id) => {\n        if (!entity_id.startsWith('sensor.') || !entity_id.endsWith('_status')) {\n          return false;\n        }\n        const state = this.hass.states[entity_id];\n        // Med Expert status sensors have medication_id attribute\n        return state?.attributes?.medication_id !== undefined;\n      });\n\n      // Parse medications from sensor entities, filtered by current profile\n      this._medications = entities\n        .map((entity_id) => {\n          const state = this.hass.states[entity_id];\n          const baseName = entity_id.replace('sensor.', '').replace('_status', '');\n          \n          // Find related entities\n          const nextDueEntity = this.hass.states[`sensor.${baseName}_next_due`];\n          const nextDoseEntity = this.hass.states[`sensor.${baseName}_next_dose`];\n\n          // Extract entry_id from any med_expert entity\n          if (!this._entryId && state.attributes.entry_id) {\n            this._entryId = state.attributes.entry_id;\n          }\n\n          // Parse next due\n          let nextDue: Date | null = null;\n          if (nextDueEntity?.state && nextDueEntity.state !== 'unknown') {\n            nextDue = new Date(nextDueEntity.state);\n          }\n\n          // Get form and icon\n          const form = state.attributes.form || 'tablet';\n          const formInfo = DOSAGE_FORMS[form as keyof typeof DOSAGE_FORMS] || DOSAGE_FORMS.tablet;\n\n          return {\n            entity_id,\n            medication_id: state.attributes.medication_id || '',\n            entry_id: state.attributes.entry_id || '',\n            name: state.attributes.friendly_name?.replace(' Status', '') || state.attributes.display_name || baseName,\n            status: state.state as MedicationStatus,\n            next_due: nextDue,\n            next_dose: nextDoseEntity?.state || state.attributes.next_dose || '',\n            form,\n            icon: formInfo.icon,\n            inventory: state.attributes.inventory ? {\n              current: state.attributes.inventory.current_quantity || 0,\n              threshold: state.attributes.inventory.refill_threshold || 7,\n              low: (state.attributes.inventory.current_quantity || 0) <= (state.attributes.inventory.refill_threshold || 7)\n            } : undefined,\n            attributes: state.attributes\n          } as ParsedMedication;\n        })\n        // Filter by current profile if selected\n        .filter((med) => !this._currentProfile || med.entry_id === this._currentProfile.entry_id);\n\n      this._loading = false;\n    } catch (error) {\n      this._error = `Failed to load medications: ${error}`;\n      this._loading = false;\n    }\n  }\n\n  private async _loadProfiles() {\n    try {\n      const result = await this.hass.callWS({ type: 'config_entries/get' }) as Array<{\n        entry_id: string;\n        domain: string;\n        title: string;\n        state: string;\n      }>;\n      \n      this._profiles = result\n        .filter(entry => entry.domain === 'med_expert')\n        .map(entry => ({\n          entry_id: entry.entry_id,\n          title: entry.title,\n          state: entry.state\n        }));\n    } catch (error) {\n      console.error('Failed to load profiles:', error);\n      this._profiles = [];\n    }\n  }\n\n  private _selectProfile(profile: ProfileInfo) {\n    this._currentProfile = profile;\n    this._entryId = profile.entry_id;\n    // Reload medications for new profile\n    this._loadData();\n  }\n\n  // Grouped medications\n  private get _dueMedications(): ParsedMedication[] {\n    return this._medications.filter(m => m.status === 'due' || m.status === 'missed' || m.status === 'snoozed');\n  }\n\n  private get _upcomingMedications(): ParsedMedication[] {\n    const now = new Date();\n    const endOfDay = new Date(now);\n    endOfDay.setHours(23, 59, 59, 999);\n    \n    return this._medications.filter(m => {\n      if (m.status !== 'ok' || !m.next_due) return false;\n      return m.next_due <= endOfDay;\n    }).sort((a, b) => (a.next_due?.getTime() || 0) - (b.next_due?.getTime() || 0));\n  }\n\n  private get _completedToday(): ParsedMedication[] {\n    // For now, we don't have a \"taken today\" status, so this is empty\n    // This would require tracking in the backend\n    return [];\n  }\n\n  private get _stats() {\n    const total = this._medications.length;\n    const due = this._dueMedications.length;\n    const upcoming = this._upcomingMedications.length;\n    return { total, due, upcoming };\n  }\n\n  private async _takeMedication(medication: ParsedMedication) {\n    try {\n      await this.hass.callService('med_expert', 'take', {\n        medication_id: medication.medication_id,\n        entry_id: medication.entry_id\n      });\n      await this._loadData();\n    } catch (error) {\n      this._error = `Failed to take medication: ${error}`;\n    }\n  }\n\n  private async _snoozeMedication(medication: ParsedMedication) {\n    try {\n      await this.hass.callService('med_expert', 'snooze', {\n        medication_id: medication.medication_id,\n        entry_id: medication.entry_id\n      });\n      await this._loadData();\n    } catch (error) {\n      this._error = `Failed to snooze medication: ${error}`;\n    }\n  }\n\n  private async _skipMedication(medication: ParsedMedication) {\n    try {\n      await this.hass.callService('med_expert', 'skip', {\n        medication_id: medication.medication_id,\n        entry_id: medication.entry_id\n      });\n      await this._loadData();\n    } catch (error) {\n      this._error = `Failed to skip medication: ${error}`;\n    }\n  }\n\n  private _formatTime(date: Date | null): string {\n    if (!date) return '--:--';\n    return date.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });\n  }\n\n  private _formatTimeAgo(date: Date | null): { value: string; label: string; overdue: boolean } {\n    if (!date) return { value: '--:--', label: '', overdue: false };\n    \n    const now = new Date();\n    const diff = date.getTime() - now.getTime();\n    const absDiff = Math.abs(diff);\n    const overdue = diff < 0;\n    \n    if (absDiff < 60000) {\n      return { value: 'Jetzt', label: '', overdue };\n    } else if (absDiff < 3600000) {\n      const mins = Math.round(absDiff / 60000);\n      return { \n        value: `${overdue ? '-' : ''}${mins}`, \n        label: 'Min', \n        overdue \n      };\n    } else {\n      return { \n        value: this._formatTime(date), \n        label: overdue ? 'berfllig' : 'Uhr', \n        overdue \n      };\n    }\n  }\n\n  render() {\n    if (this._loading) {\n      return html`\n        <div class=\"loading\">\n          <div class=\"loading-spinner\"></div>\n          <p>Medikamente laden...</p>\n        </div>\n      `;\n    }\n\n    return html`\n      <div class=\"app-container\">\n        ${this._renderHeader()}\n        ${this._renderTabs()}\n        \n        <div class=\"content\">\n          ${this._error ? html`<div class=\"error\">${this._error}</div>` : ''}\n          \n          ${this._activeTab === 'today' ? this._renderTodayTab() : ''}\n          ${this._activeTab === 'calendar' ? this._renderCalendarTab() : ''}\n          ${this._activeTab === 'profile' ? this._renderProfileTab() : ''}\n          ${this._activeTab === 'meds' ? this._renderMedsTab() : ''}\n        </div>\n      </div>\n\n      ${this._showWizard ? html`\n        <div class=\"wizard-overlay\" @click=${(e: Event) => e.target === e.currentTarget && this._closeWizard()}>\n          <add-medication-wizard\n            .hass=${this.hass}\n            .entryId=${this._entryId || ''}\n            @close=${this._closeWizard}\n          ></add-medication-wizard>\n        </div>\n      ` : ''}\n    `;\n  }\n\n  private _renderHeader() {\n    const stats = this._stats;\n    const greeting = this._getGreeting();\n    const profileName = this._currentProfile?.title || 'Kein Profil';\n    \n    return html`\n      <div class=\"header\">\n        <div class=\"header-top\">\n          <div>\n            <h1>${greeting}</h1>\n            <div class=\"header-subtitle\">\n              ${this._profiles.length > 1 ? html`\n                <select \n                  class=\"profile-select\"\n                  .value=${this._currentProfile?.entry_id || ''}\n                  @change=${(e: Event) => {\n                    const select = e.target as HTMLSelectElement;\n                    const profile = this._profiles.find(p => p.entry_id === select.value);\n                    if (profile) this._selectProfile(profile);\n                  }}\n                >\n                  ${this._profiles.map(p => html`\n                    <option value=${p.entry_id} ?selected=${p.entry_id === this._currentProfile?.entry_id}>\n                      ${p.title}\n                    </option>\n                  `)}\n                </select>\n                <span style=\"margin: 0 6px;\"></span>\n              ` : this._profiles.length === 1 ? html`\n                <span class=\"profile-badge\"> ${profileName}</span>\n                <span style=\"margin: 0 6px;\"></span>\n              ` : ''}\n              ${stats.due > 0 \n                ? `${stats.due} Medikament${stats.due > 1 ? 'e' : ''} jetzt fllig`\n                : stats.upcoming > 0 \n                  ? `${stats.upcoming} noch heute`\n                  : 'Alles erledigt '}\n            </div>\n          </div>\n          <button class=\"add-btn\" @click=${this._openWizard} title=\"Medikament hinzufgen\">\n            \n          </button>\n        </div>\n        \n        <div class=\"stats-bar\">\n          <div class=\"stat\">\n            <div class=\"stat-value\">${stats.due}</div>\n            <div class=\"stat-label\">Fllig</div>\n          </div>\n          <div class=\"stat\">\n            <div class=\"stat-value\">${stats.upcoming}</div>\n            <div class=\"stat-label\">Heute noch</div>\n          </div>\n          <div class=\"stat\">\n            <div class=\"stat-value\">${stats.total}</div>\n            <div class=\"stat-label\">Gesamt</div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private _getGreeting(): string {\n    const hour = new Date().getHours();\n    if (hour < 12) return ' Guten Morgen';\n    if (hour < 18) return ' Guten Tag';\n    return ' Guten Abend';\n  }\n\n  private _renderTabs() {\n    const tabs: { id: TabType; icon: string; label: string }[] = [\n      { id: 'today', icon: '', label: 'Heute' },\n      { id: 'calendar', icon: '', label: 'Kalender' },\n      { id: 'profile', icon: '', label: 'Profil' },\n      { id: 'meds', icon: '', label: 'Meds' },\n    ];\n\n    return html`\n      <nav class=\"tab-nav\">\n        ${tabs.map(tab => html`\n          <button \n            class=\"tab ${this._activeTab === tab.id ? 'active' : ''}\"\n            @click=${() => this._activeTab = tab.id}\n          >\n            <span class=\"tab-icon\">${tab.icon}</span>\n            ${tab.label}\n          </button>\n        `)}\n      </nav>\n    `;\n  }\n\n  private _renderTodayTab() {\n    if (this._medications.length === 0) {\n      return this._renderEmptyState();\n    }\n\n    const dueMeds = this._dueMedications;\n    const upcomingMeds = this._upcomingMedications;\n\n    return html`\n      ${dueMeds.length > 0 ? html`\n        <div class=\"section\">\n          <div class=\"section-header\">\n            <span class=\"section-title\"> Jetzt fllig</span>\n            <span class=\"section-badge\">${dueMeds.length}</span>\n          </div>\n          ${dueMeds.map(med => this._renderMedCard(med, true))}\n        </div>\n      ` : ''}\n\n      ${upcomingMeds.length > 0 ? html`\n        <div class=\"section\">\n          <div class=\"section-header\">\n            <span class=\"section-title\"> Heute noch</span>\n          </div>\n          ${upcomingMeds.map(med => this._renderMedCard(med, false))}\n        </div>\n      ` : ''}\n\n      ${dueMeds.length === 0 && upcomingMeds.length === 0 ? html`\n        <div class=\"empty-state\">\n          <div class=\"empty-icon\"></div>\n          <div class=\"empty-title\">Alles erledigt!</div>\n          <div class=\"empty-text\">Keine Medikamente mehr fr heute.</div>\n        </div>\n      ` : ''}\n    `;\n  }\n\n  private _renderMedCard(med: ParsedMedication, showActions: boolean) {\n    const timeInfo = this._formatTimeAgo(med.next_due);\n    const isUrgent = med.status === 'missed';\n    const isDue = med.status === 'due' || med.status === 'snoozed';\n\n    return html`\n      <div class=\"med-card ${isUrgent ? 'urgent' : isDue ? 'due' : ''}\">\n        <div class=\"med-icon\">${med.icon}</div>\n        <div class=\"med-info\">\n          <div class=\"med-name\">${med.name}</div>\n          <div class=\"med-dose\">${med.next_dose}</div>\n          ${med.inventory?.low ? html`\n            <div class=\"inventory-warning\"> Nur noch ${med.inventory.current} brig</div>\n          ` : ''}\n        </div>\n        <div class=\"med-time\">\n          <div class=\"med-time-value ${timeInfo.overdue ? 'med-time-overdue' : ''}\">${timeInfo.value}</div>\n          <div class=\"med-time-label\">${timeInfo.label}</div>\n        </div>\n      </div>\n      \n      ${showActions ? html`\n        <div class=\"med-actions\" style=\"margin-top: -4px; margin-bottom: 12px;\">\n          <button class=\"action-btn take\" @click=${() => this._takeMedication(med)}>\n             Genommen\n          </button>\n          <button class=\"action-btn snooze\" @click=${() => this._snoozeMedication(med)}>\n             Spter\n          </button>\n          <button class=\"action-btn skip\" @click=${() => this._skipMedication(med)}>\n            \n          </button>\n        </div>\n      ` : ''}\n    `;\n  }\n\n  private _renderEmptyState() {\n    return html`\n      <div class=\"empty-state\">\n        <div class=\"empty-icon\"></div>\n        <div class=\"empty-title\">Keine Medikamente</div>\n        <div class=\"empty-text\">Fge dein erstes Medikament hinzu, um loszulegen.</div>\n        <button class=\"empty-btn\" @click=${this._openWizard}>\n           Medikament hinzufgen\n        </button>\n      </div>\n    `;\n  }\n\n  private _renderCalendarTab() {\n    return html`\n      <div class=\"calendar-placeholder\">\n        <div style=\"font-size: 48px; margin-bottom: 16px;\"></div>\n        <p>Kalenderansicht kommt bald...</p>\n      </div>\n    `;\n  }\n\n  private _renderProfileTab() {\n    return html`\n      <div class=\"section\">\n        <div class=\"section-header\">\n          <span class=\"section-title\">Aktuelles Profil</span>\n        </div>\n        \n        ${this._currentProfile ? html`\n          <div class=\"profile-card\">\n            <div class=\"profile-avatar\"></div>\n            <div class=\"profile-info\">\n              <div class=\"profile-name\">${this._currentProfile.title}</div>\n              <div class=\"profile-status\">\n                ${this._currentProfile.state === 'loaded' ? ' Aktiv' : ' ' + this._currentProfile.state}\n              </div>\n            </div>\n          </div>\n          \n          <div class=\"profile-stats\">\n            <div class=\"profile-stat\">\n              <span class=\"stat-icon\"></span>\n              <span>${this._medications.length} Medikamente</span>\n            </div>\n          </div>\n        ` : html`\n          <div class=\"no-profile\">\n            <p>Kein Profil ausgewhlt</p>\n          </div>\n        `}\n      </div>\n      \n      ${this._profiles.length > 0 ? html`\n        <div class=\"section\">\n          <div class=\"section-header\">\n            <span class=\"section-title\">Alle Profile (${this._profiles.length})</span>\n          </div>\n          \n          ${this._profiles.map(profile => html`\n            <div \n              class=\"profile-list-item ${profile.entry_id === this._currentProfile?.entry_id ? 'active' : ''}\"\n              @click=${() => this._selectProfile(profile)}\n            >\n              <div class=\"profile-avatar-small\"></div>\n              <div class=\"profile-item-info\">\n                <div class=\"profile-item-name\">${profile.title}</div>\n                <div class=\"profile-item-status\">\n                  ${profile.state === 'loaded' ? 'Aktiv' : profile.state}\n                </div>\n              </div>\n              ${profile.entry_id === this._currentProfile?.entry_id ? html`\n                <span class=\"check-mark\"></span>\n              ` : ''}\n            </div>\n          `)}\n        </div>\n      ` : ''}\n      \n      <div class=\"section\">\n        <button class=\"profile-action-btn\" @click=${this._openAddProfile}>\n           Neues Profil erstellen\n        </button>\n      </div>\n    `;\n  }\n\n  private _openAddProfile() {\n    // Navigate to Home Assistant config flow for med_expert\n    window.location.href = '/config/integrations/integration/med_expert';\n  }\n\n  private _renderMedsTab() {\n    if (this._medications.length === 0) {\n      return this._renderEmptyState();\n    }\n\n    return html`\n      <div class=\"section\">\n        <div class=\"section-header\">\n          <span class=\"section-title\">Alle Medikamente</span>\n        </div>\n        ${this._medications.map(med => html`\n          <div class=\"meds-list-item\">\n            <div class=\"med-icon\">${med.icon}</div>\n            <div class=\"med-info\">\n              <div class=\"med-name\">${med.name}</div>\n              <div class=\"med-dose\">${med.next_dose}</div>\n              ${med.inventory ? html`\n                <div style=\"font-size: 11px; color: var(--secondary-text-color);\">\n                   ${med.inventory.current} auf Lager\n                </div>\n              ` : ''}\n            </div>\n          </div>\n        `)}\n      </div>\n    `;\n  }\n\n  private async _openWizard() {\n    // Find entry_id from first medication\n    if (!this._entryId && this._medications.length > 0) {\n      this._entryId = this._medications[0].entry_id;\n    }\n    \n    // If still no entry_id, try to get from sensor attributes\n    if (!this._entryId) {\n      const configEntries = Object.keys(this.hass.states)\n        .filter(e => e.includes('med_expert'))\n        .map(e => this.hass.states[e]?.attributes?.entry_id)\n        .filter(Boolean);\n      \n      if (configEntries.length > 0) {\n        this._entryId = configEntries[0] as string;\n      }\n    }\n\n    // If still no entry_id, fetch from config entries via WebSocket\n    if (!this._entryId) {\n      try {\n        const result = await this.hass.callWS({ type: 'config_entries/get' }) as Array<{\n          entry_id: string;\n          domain: string;\n          title: string;\n        }>;\n        const medExpertEntry = result.find(entry => entry.domain === 'med_expert');\n        if (medExpertEntry) {\n          this._entryId = medExpertEntry.entry_id;\n        }\n      } catch (error) {\n        console.error('Failed to fetch config entries:', error);\n      }\n    }\n\n    if (!this._entryId) {\n      this._error = 'Kein Med Expert Profil gefunden. Bitte erstelle zuerst ein Profil in den Einstellungen.';\n      return;\n    }\n    \n    this._showWizard = true;\n  }\n\n  private _closeWizard() {\n    this._showWizard = false;\n    // Reload data to show new medication\n    setTimeout(() => this._loadData(), 500);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'med-expert-panel': MedExpertPanel;\n  }\n}\n"],"names":["t","globalThis","e","ShadowRoot","ShadyCSS","nativeShadow","Document","prototype","CSSStyleSheet","s","Symbol","o","WeakMap","n","constructor","this","_$cssResult$","Error","cssText","styleSheet","length","get","replaceSync","set","toString","i","reduce","S","adoptedStyleSheets","map","document","createElement","litNonce","setAttribute","textContent","appendChild","c","cssRules","r","is","defineProperty","getOwnPropertyDescriptor","h","getOwnPropertyNames","getOwnPropertySymbols","getPrototypeOf","Object","a","trustedTypes","l","emptyScript","p","reactiveElementPolyfillSupport","d","u","toAttribute","Boolean","Array","JSON","stringify","fromAttribute","Number","parse","f","b","attribute","type","String","converter","reflect","useDefault","hasChanged","metadata","litPropertyMetadata","y","HTMLElement","addInitializer","_$Ei","push","observedAttributes","finalize","_$Eh","keys","createProperty","state","hasOwnProperty","create","wrapped","elementProperties","noAccessor","getPropertyDescriptor","call","requestUpdate","configurable","enumerable","getPropertyOptions","Map","finalized","properties","_$Eu","elementStyles","finalizeStyles","styles","isArray","Set","flat","reverse","unshift","toLowerCase","super","_$Ep","isUpdatePending","hasUpdated","_$Em","_$Ev","_$ES","Promise","enableUpdating","_$AL","_$E_","forEach","addController","_$EO","add","renderRoot","isConnected","hostConnected","removeController","delete","size","createRenderRoot","shadowRoot","attachShadow","shadowRootOptions","connectedCallback","disconnectedCallback","hostDisconnected","attributeChangedCallback","_$AK","_$ET","removeAttribute","_$Ej","hasAttribute","C","_$EP","has","_$Eq","reject","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","update","_$EM","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","mode","ReactiveElement","reactiveElementVersions","createPolicy","createHTML","Math","random","toFixed","slice","createComment","v","_","m","RegExp","g","$","x","_$litType$","strings","values","E","for","A","P","createTreeWalker","V","N","lastIndex","exec","test","startsWith","parts","el","currentNode","content","firstChild","replaceWith","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","split","index","name","ctor","I","L","z","H","tagName","append","data","indexOf","innerHTML","M","_$Co","_$Cl","_$litDirective$","_$AO","_$AT","_$AS","R","_$AV","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","k","nextSibling","Z","_$AI","_$Cv","_$AH","_$AA","_$AB","options","startNode","endNode","_$AR","T","iterator","O","insertBefore","createTextNode","_$AC","_$AP","remove","setConnected","element","fill","j","arguments","toggleAttribute","capture","once","passive","removeEventListener","addEventListener","handleEvent","host","B","litHtmlPolyfillSupport","litHtmlVersions","renderOptions","_$Do","renderBefore","render","_$litPart$","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","customElements","define","kind","init","DOSAGE_FORMS","tablet","icon","label","units","capsule","injection","nasal_spray","inhaler","drops","cream","patch","suppository","liquid","powder","other","SCHEDULE_TYPES","times_per_day","description","interval","weekly","as_needed","depot","WEEKDAYS","value","short","long","DOSE_PRESETS","numerator","denominator","AddMedicationWizard","_step","_saving","_error","_formData","form","display_name","dose_numerator","dose_denominator","dose_unit","schedule_kind","times","weekdays","interval_minutes","track_inventory","current_quantity","refill_threshold","grace_minutes","snooze_minutes","_renderStep1","_renderStep2","_renderStep3","_renderStep4","_renderSuccess","_prevStep","_close","_nextStep","_canProceed","_save","forms","entries","key","_selectForm","formInfo","_updateField","target","strength","strength_unit","preset","_selectDose","unit","notes","_renderTimesInput","_renderWeeklyInput","_renderIntervalInput","time","_updateTime","_removeTime","_addTime","day","includes","_toggleWeekday","hours","parseInt","mins","_addAnother","field","splice","sort","trim","displayName","serviceData","entry_id","entryId","default_dose","policy","inventory","auto_decrement","hass","callService","error","dispatchEvent","CustomEvent","MedExpertPanel","narrow","_medications","_loading","_activeTab","_showWizard","_entryId","_profiles","_currentProfile","_loadData","_refreshInterval","setInterval","clearInterval","_loadProfiles","entities","states","filter","entity_id","undefined","attributes","medication_id","baseName","replace","nextDueEntity","nextDoseEntity","nextDue","Date","friendly_name","status","next_due","next_dose","current","threshold","low","med","result","callWS","entry","domain","title","console","_selectProfile","profile","_dueMedications","_upcomingMedications","now","endOfDay","setHours","getTime","_completedToday","_stats","total","due","upcoming","_takeMedication","medication","_snoozeMedication","_skipMedication","_formatTime","date","toLocaleTimeString","hour","minute","_formatTimeAgo","overdue","diff","absDiff","abs","round","_renderHeader","_renderTabs","_renderTodayTab","_renderCalendarTab","_renderProfileTab","_renderMedsTab","currentTarget","_closeWizard","stats","greeting","_getGreeting","profileName","select","find","_openWizard","getHours","id","tab","_renderEmptyState","dueMeds","upcomingMeds","_renderMedCard","showActions","timeInfo","isUrgent","isDue","_openAddProfile","window","location","href","configEntries","medExpertEntry","setTimeout"],"ignoreList":[],"sourceRoot":""}